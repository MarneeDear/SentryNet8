@model Sentry.WebApp.ViewModels.GiftTransmittal.GiftTransmittalViewModel
@using Sentry.WebApp.Extensions;

@{
    ViewData["Title"] = Model.Title;
}

<ul class="page-title">
    <li>
        <h2>
            Form:
            <span title="Form Number: @Model.FormNumber"> @Model.FormNumber</span>
        </h2>
    </li>
    <li>
        <h2>
            Date:
            <span title="Date Created: @Model.CreatedOnDT"> @Model.CreatedOnDT</span>
        </h2>
    </li>
    <li>
        <h2>
            Source:
            <span title="Source System">UAFDN</span>
        </h2>
    </li>
</ul>

<ol class="breadcrumb">
    <li><a asp-area="" asp-controller="Home" asp-action="Index">Sentry Home</a></li>
    <li><a asp-area="" asp-controller="Financial" asp-action="Index">Finance Dashboard</a></li>
    <li><a asp-area="" asp-controller="GiftTransmittal" asp-action="Index">Record List</a></li>
    <li class="active">Record Details</li>
</ol>

<div id="content-container" class="content-container" role="main">

    <!--PreparedBy Section-->
    <form id="editForm" method="post" enctype="multipart/form-data">

        <input type="hidden" asp-for="Organization" value="@Model.Organization" />
        <input type="hidden" asp-for="PreparedBy.PreparedByName" value="@Model.PreparedBy.PreparedByName" />
        <input type="hidden" asp-for="GiftTransmittalId" value="@Model.GiftTransmittalId" />
        <input type="hidden" asp-for="ItemId" value="@Model.ItemId" />
        <input type="hidden" asp-for="EFormCode" value="@Model.EFormCode" />
        <input type="hidden" asp-for="FormNumber" value="@Model.FormNumber" />
        <input type="hidden" asp-for="FormStatusCode" value="@Model.FormStatusCode" />
        <input type="hidden" asp-for="ItemId" value="@Model.ItemId" />
        <input type="hidden" asp-for="IsChanged" value="@Model.IsChanged" />
        <input type="hidden" asp-for="Id" value="@Model.Id" />
        <input type="hidden" asp-for="System" value="@Model.System" />
        <input type="hidden" asp-for="SystemId" value="@Model.SystemId" />
        <input type="hidden" asp-for="Integration" value="@Model.Integration" />
        <input type="hidden" asp-for="IntegrationId" value="@Model.IntegrationId" />
        <input type="hidden" asp-for="RecordStatus" value="@Model.RecordStatus" />
        <input type="hidden" asp-for="SourceRecordId" value="@Model.SourceRecordId" />
        <input type="hidden" asp-for="ChangeAgent" value="@Model.ChangeAgent" />
        <input type="hidden" asp-for="CreatedOnDT" value="@Model.CreatedOnDT" />
        <input type="hidden" asp-for="FormNumber" value="@Model.FormNumber" />
        <input type="hidden" asp-for="PreparedBy.ContactName" value="@Model.PreparedBy.ContactName" />
        <input type="hidden" asp-for="PreparedBy.ContactEmail" value="@Model.PreparedBy.ContactEmail" />
        <input type="hidden" asp-for="PreparedBy.ContactPhoneNumber" value="@Model.PreparedBy.ContactPhoneNumber" />
        <input type="hidden" asp-for="Approved" value="@Model.Approved" />
        <input type="hidden" asp-for="SupportingDocuments" value="@Model.SupportingDocuments" />

        @for (int i = 0; i < Model.Approvals.Count; i++)
        {
            <input type="hidden" asp-for="Approvals[i].Id" value="@Model.Approvals[i].Id" />
            <input type="hidden" asp-for="Approvals[i].Approved" value="@Model.Approvals[i].Approved" />
            <input type="hidden" asp-for="Approvals[i].ApprovalStageCode" value="@Model.Approvals[i].ApprovalStageCode" />
            <input type="hidden" asp-for="Approvals[i].ApprovedOn" value="@Model.Approvals[i].ApprovedOn" />
            <input type="hidden" asp-for="Approvals[i].ApproverEmployeeId" value="@Model.Approvals[i].ApproverEmployeeId" />
            <input type="hidden" asp-for="Approvals[i].Comments" value="@Model.Approvals[i].Comments" />
        }

        @if (Model.ApprovalHistory != null)
        {
            @for (int i = 0; i < Model.ApprovalHistory.Count; i++)
            {
                <input type="hidden" asp-for="ApprovalHistory[i].Id" value="@Model.ApprovalHistory[i].Id" />
                <input type="hidden" asp-for="ApprovalHistory[i].Approved" value="@Model.ApprovalHistory[i].Approved" />
                <input type="hidden" asp-for="ApprovalHistory[i].ApprovalStageCode" value="@Model.ApprovalHistory[i].ApprovalStageCode" />
                <input type="hidden" asp-for="ApprovalHistory[i].ApprovedOn" value="@Model.ApprovalHistory[i].ApprovedOn" />
                <input type="hidden" asp-for="ApprovalHistory[i].ApproverEmployeeId" value="@Model.ApprovalHistory[i].ApproverEmployeeId" />
                <input type="hidden" asp-for="ApprovalHistory[i].Comments" value="@Model.ApprovalHistory[i].Comments" />
            }

        }

        @if(Model.ApproverStage != 3)
        {
            <input type="hidden" asp-for="PostDate" value="@Model.PostDate" />
        }

        <div asp-validation-summary="All" class="text-danger"></div>
        <div class="panel panel-secondary">
            <div class="panel-heading">
                <h3 class="panel-title">Form number: <span class="record-text h3">@Model.FormNumber</span> Form status: <span class="record-text h3">@Model.FormState</span></h3>
            </div>
            <ul class="horizontal-list">
                <li>Date Prepared: <span>@Model.PreparedBy.PreparedByDate</span></li>
                <li>Contact Name: <span>@Model.PreparedBy.ContactName</span></li>
                <li>Contact Email: <span>@Model.PreparedBy.ContactEmail</span></li>
                <li>Contact Phone: <span>@Model.PreparedBy.ContactPhoneNumber</span></li>
            </ul>
            <div class="panel-body">
                <div class="col-sm-12 col-lg-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Constituent:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-xs-12 col-sm-12 col-lg-12">
                                <input asp-for="Constituent.ConstituentId" type="hidden" value="@Model.Constituent.ConstituentId" />

                                <fieldset>
                                    <legend class="sr-only">Constituent Details</legend>
                                    <div class="form-group col-lg-6">
                                        <label asp-for="Constituent.LookupId"
                                               class="control-label">Constituent Lookup ID</label>
                                        <input asp-for="Constituent.LookupId" class="form-control" placeholder="Constituent Lookup ID" />
                                        <span asp-validation-for="Constituent.LookupId" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-6">
                                        <label asp-for="Constituent.OrganizationName" class="control-label">Organization Name</label>
                                        <input asp-for="Constituent.OrganizationName" class="form-control" placeholder="Organization Name" />
                                        <span asp-validation-for="Constituent.OrganizationName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-6">
                                        <label asp-for="Constituent.Title" class="control-label">Title</label>
                                        <select class="form-control" asp-for="Constituent.Title" asp-items="Model.TitlesList">
                                            <option value="">-- Select Title --</option>
                                        </select>
                                        <span asp-validation-for="Constituent.Title" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-6">
                                        <label asp-for="Constituent.Suffix" class="control-label">Suffix</label>
                                        <select class="form-control" asp-for="Constituent.Suffix" asp-items="Model.SuffixesList">
                                            <option value="">-- Select Suffix --</option>
                                        </select>
                                        <span asp-validation-for="Constituent.Suffix" class="text-danger"></span>
                                    </div>

                                    <div class="form-group col-lg-4">
                                        <label asp-for="Constituent.FirstName" class="control-label">First Name</label>
                                        <input asp-for="Constituent.FirstName" class="form-control" placeholder="First Name" />
                                        <span asp-validation-for="Constituent.FirstName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-4">
                                        <label asp-for="Constituent.MiddleName" class="control-label">Middle Name</label>
                                        <input asp-for="Constituent.MiddleName" class="form-control" placeholder="Middle Name" />
                                        <span asp-validation-for="Constituent.MiddleName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-4">
                                        <label asp-for="Constituent.LastName" class="control-label">Last Name</label>
                                        <input asp-for="Constituent.LastName" class="form-control" placeholder="Last Name" />
                                        <span asp-validation-for="Constituent.LastName" class="text-danger"></span>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>Constituent Contact Details</legend>

                                    <div class="form-group col-lg-6">
                                        <label asp-for="Constituent.PhoneNumber" class="control-label">Primary Phone</label>
                                        <input asp-for="Constituent.PhoneNumber" class="form-control" placeholder="Primary Phone" />
                                        <span asp-validation-for="Constituent.PhoneNumber" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-6">
                                        <label asp-for="Constituent.Email" class="control-label">Primary email</label>
                                        <input asp-for="Constituent.Email" class="form-control" placeholder="Primary email" />
                                        <span asp-validation-for="Constituent.Email" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-12">
                                        <label asp-for="Constituent.Address.Street" class="control-label">Primary mailing address</label>
                                        <input asp-for="Constituent.Address.Street" class="form-control" placeholder="Primary mailing address" />
                                        <span asp-validation-for="Constituent.Address.Street" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-4">
                                        <label asp-for="Constituent.Address.City" class="control-label">City</label>
                                        <input asp-for="Constituent.Address.City" class="form-control" placeholder="City" />
                                        <span asp-validation-for="Constituent.Address.City" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-2">
                                        <label asp-for="Constituent.Address.State" class="control-label">State</label>
                                        <select asp-for="Constituent.Address.State" asp-items="Model.StatesList" class="form-control" placeholder="State">
                                        </select>
                                        <span asp-validation-for="Constituent.Address.State" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-2">
                                        <label asp-for="Constituent.Address.PostalCode" class="control-label">Postal Code</label>
                                        <input asp-for="Constituent.Address.PostalCode" class="form-control" placeholder="Postal Code" />
                                        <span asp-validation-for="Constituent.Address.PostalCode" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-4">
                                        <label asp-for="Constituent.Address.Country" class="control-label">Country</label>
                                        <select class="form-control" asp-for="Constituent.Address.Country" asp-items="Model.CountriesList">
                                        </select>
                                        <span asp-validation-for="Constituent.Address.Country" class="text-danger"></span>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End Constituent Panel-->
            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Recognition Credit:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-xs-12 col-sm-12 col-lg-12">
                                @*<div class="form-check-inline">
                                <input asp-for="IncludeRecognitionCredit" class="form-check-input" />
                                <label asp-for="IncludeRecognitionCredit" class="form-check-label">Include Recognition Credit</label>
                                </div>*@
                                @if (Model.GiftTransmittalRecognitionCredits != null
                                && Model.GiftTransmittalRecognitionCredits.Any())
                                {
                                    @for (int i = 0; i < Model.GiftTransmittalRecognitionCredits.Count(); i++)
                                    {
                                        <div class="col-xs-12 col-sm-12 col-lg-12">
                                            <h4>Recognition Credit #@(i + 1)</h4>
                                            <fieldset>
                                                <legend class="sr-only">Recognition Credit Details</legend>
                                                <div class="constituent" id="recognitionCredit">
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].Id" type="hidden" value="@Model.GiftTransmittalRecognitionCredits[i].Id" />
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].ConstituentId" type="hidden" />

                                                    <div class="col-lg-12">
                                                        <div class="row">
                                                            <div class="form-group col-lg-6">
                                                                <label asp-for="GiftTransmittalRecognitionCredits[i].LookupId" class="control-label">Constituent Lookup ID</label>
                                                                <input asp-for="GiftTransmittalRecognitionCredits[i].LookupId" class="form-control" placeholder="Constituent Lookup ID" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group col-lg-6">
                                                        <label asp-for="GiftTransmittalRecognitionCredits[i].Title" class="control-label">Title</label>
                                                        <select class="form-control" asp-for="GiftTransmittalRecognitionCredits[i].Title" asp-items="@Model.TitlesList"></select>
                                                        <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Title" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group col-lg-6">
                                                        <label asp-for="GiftTransmittalRecognitionCredits[i].Suffix" class="control-label">Suffix</label>
                                                        <select class="form-control" asp-for="GiftTransmittalRecognitionCredits[i].Suffix" asp-items="@Model.SuffixesList"></select>
                                                        <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Suffix" class="text-danger"></span>
                                                    </div>

                                                    <div class="form-group col-lg-4">
                                                        <label asp-for="GiftTransmittalRecognitionCredits[i].FirstName" class="control-label">First Name</label>
                                                        <input asp-for="GiftTransmittalRecognitionCredits[i].FirstName" class="form-control" placeholder="First Name" />
                                                        <span asp-validation-for="GiftTransmittalRecognitionCredits[i].FirstName" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group col-lg-4">
                                                        <label asp-for="GiftTransmittalRecognitionCredits[i].MiddleName" class="control-label">Middle Name</label>
                                                        <input asp-for="GiftTransmittalRecognitionCredits[i].MiddleName" class="form-control" placeholder="Middle Name" />
                                                        <span asp-validation-for="GiftTransmittalRecognitionCredits[i].MiddleName" class="text-danger"></span>
                                                    </div>
                                                    <div class="form-group col-lg-4">
                                                        <label asp-for="GiftTransmittalRecognitionCredits[i].LastName" class="control-label">Last Name</label>
                                                        <input asp-for="GiftTransmittalRecognitionCredits[i].LastName" class="form-control" placeholder="Last Name" />
                                                        <span asp-validation-for="GiftTransmittalRecognitionCredits[i].LastName" class="text-danger"></span>
                                                    </div>
                                                </div>
                                            </fieldset>

                                            <fieldset>
                                                <legend>Recognition Contact Details <small class="badge badge-warning">At least one contact is required: primary phone, primary email, or primary mailing address</small></legend>

                                                <div class="form-group col-lg-6">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].PhoneNumber" class="control-label">Primary Phone</label>
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].PhoneNumber" class="form-control" placeholder="Primary Phone" />
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].PhoneNumber" class="text-danger"></span>
                                                </div>
                                                <div class="form-group col-lg-6">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].Email" class="control-label">Primary email</label>
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].Email" class="form-control" placeholder="Primary email" />
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Email" class="text-danger"></span>
                                                </div>
                                                <div class="form-group col-lg-12">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].Address.Street" class="control-label">Primary mailing address</label>
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].Address.Street" class="form-control" placeholder="Primary mailing address" />
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Address.Street" class="text-danger"></span>
                                                </div>

                                                <div class="form-group col-lg-4">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].Address.City" class="control-label">City</label>
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].Address.City" class="form-control" placeholder="City" />
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Address.City" class="text-danger"></span>
                                                </div>
                                                <div class="form-group col-lg-2">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].Address.State" class="control-label">State</label>
                                                    <select asp-for="GiftTransmittalRecognitionCredits[i].Address.State" asp-items="@Model.StatesList" class="form-control" placeholder="State"></select>
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Address.State" class="text-danger"></span>
                                                </div>
                                                <div class="form-group col-lg-2">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].Address.PostalCode" class="control-label">Postal Code</label>
                                                    <input asp-for="GiftTransmittalRecognitionCredits[i].Address.PostalCode" class="form-control" placeholder="Postal Code" />
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Address.PostalCode" class="text-danger"></span>
                                                </div>
                                                <div class="form-group col-lg-4">
                                                    <label asp-for="GiftTransmittalRecognitionCredits[i].Address.Country" class="control-label">Country</label>
                                                    <select class="form-control" asp-for="GiftTransmittalRecognitionCredits[i].Address.Country" asp-items="@Model.CountriesList"></select>
                                                    <span asp-validation-for="GiftTransmittalRecognitionCredits[i].Address.Country" class="text-danger"></span>
                                                </div>
                                            </fieldset>

                                        </div>

                                    }
                                }

                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- end recognition credit panel -->
            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Transaction:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-xs-12 col-sm-12 col-lg-12">
                                <fieldset>
                                    <legend class="sr-only">Transaction Details</legend>
                                    <div class="form-group col-lg-6">
                                        <input type="hidden" value="@Model.Transaction.BatchTypeCode" />
                                        <label asp-for="Transaction.BatchTypeCode" class="control-label">Transaction Type <span class="required">*</span></label>
                                        @if (Model.FormNumber.StartsWith("GT"))
                                        {
                                            <select asp-for="Transaction.BatchTypeCode"
                                            class="form-control"
                                            asp-items="Html.GetEnumSelectList<Sentry.WebApp.ViewModels.GiftTransmittal.GTBatchTypeCodes>()" onchange="handleBatchType(this.options[this.options.selectedIndex].text);">
                                                <option value="">Select</option>
                                            </select>
                                        }
                                        @if (Model.FormNumber.StartsWith("GU"))
                                        {
                                            <select asp-for="Transaction.BatchTypeCode"
                                                    class="form-control"
                                                    asp-items="Html.GetEnumSelectList<Sentry.WebApp.ViewModels.GiftTransmittal.GUBatchTypeCodes>()" onchange="handleBatchType(this.options[this.options.selectedIndex].text);">
                                                <option value="">Select</option>
                                            </select>
                                        }
                                        <span asp-validation-for="Transaction.BatchTypeCode" class="text-danger"></span>
                                    </div>
                                    <div class="form-group col-lg-6 @(Model.Transaction.BatchTypeCode != 4 ? " d-none" : "" )">
                                        <div class="batchTypeOther">
                                            <label asp-for="Transaction.BatchTypeOtherDesc" class="control-label"> Other Transaction Type - Please Specify <span class="required">*</span></label>
                                            <input asp-for="Transaction.BatchTypeOtherDesc" class="form-control" />
                                            <span asp-validation-for="Transaction.BatchTypeOtherDesc" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div id="CheckPayableToTheUniversitySection" class="form-group col-lg-12 @(Model.Transaction.BatchTypeCode != 1 ? "d-none" : "")">
                                        <label>Is this check made payable to the University of Arizona or one of its subdivisions or departments?</label>
                                        <div class="form-group">
                                            <input id="CheckPayableToTheUniversity_Yes" type="radio" value="true" asp-for="CheckPayableToTheUniversity" />
                                            <label class="control-label">Yes</label>

                                            <input id="CheckPayableToTheUniversity_No" type="radio" value="false" asp-for="CheckPayableToTheUniversity" />
                                            <label class="control-label">No</label>
                                        </div>
                                        <p class="text-danger">By selecting Yes I certify this check should be deposited in the University of Arizona Foundation project, and wish to have the University of Arizona Bursar endorse the check to the Foundation.</p>
                                        <div id="CheckNumberSection" class="form-group @(!Model.CheckPayableToTheUniversity ? "d-none" : "")" style="width:25%;">
                                            <label asp-for="CheckNumber" class="control-label">Check Number <span class="required">*</span></label>
                                            <input asp-for="CheckNumber" class="form-control" maxlength="12" />
                                            <span asp-validation-for="CheckNumber" class="text-danger"></span>
                                        </div>

                                    </div>

                                    <div class="form-group col-lg-12">
                                        <label asp-for="Transaction.Comments" class="control-label">Comments</label>
                                        <textarea asp-for="Transaction.Comments" class="form-control" placeholder="Comments" rows="5"></textarea>
                                        <span asp-validation-for="Transaction.Comments" class="text-danger"></span>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- end transactions panel -->
            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Designations:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="col-xs-12 col-sm-12 col-lg-12">
                                <table id="distTable" class="table">

                                    <tbody>
                                        @{
                                            string placeholder = Model.Organization == "uaf" ? "99-99-9999" : "5503200";
                                        }
                                        @for (int i = 0; i < Model.Distributions.Count(); i++)
                                        {
                                            @await Html.PartialAsync("_Item", Model.Distributions[i], new ViewDataDictionary(ViewData) { { "index", i }, { "organization", Model.Organization }, { "formNumber", Model.FormNumber }, { "distributionCount", Model.Distributions.Count() } })
                                        }
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td>
                                                <div class="form-group text-center">
                                                    @* <input type="submit"
                                                    asp-action="AddDistribution"
                                                    id="addDistribution"
                                                    class="btn btn-primary mb-4"
                                                    value="Split Distribution" /> *@
                                                    <input id="splitButton"
                                                           type="button"
                                                           class="btn btn-primary"
                                                           value="Split Distribution"
                                                           data-index="@Model.Distributions.Count()" />
                                                </div>
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                                <div class="col-md-12 text-center">
                                    <div class="form-group col-md-2 col-md-offset-2">
                                        <label asp-for="Distribution.DistributionTotals.GiftAmountTotal" class="control-label inlineLabel">Gift Total: </label>
                                        <input id="giftTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.GiftAmountTotal" disabled />
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label asp-for="Distribution.DistributionTotals.BenefitAmountTotal" class="control-label inlineLabel">Benefit Total: </label>
                                        <input id="benefitTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.BenefitAmountTotal" disabled />
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label asp-for="Distribution.DistributionTotals.ReceiptAmountTotal" class="control-label inlineLabel">Receipt Total: </label>
                                        <input id="receiptTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.ReceiptAmountTotal" disabled />
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label asp-for="Distribution.DistributionTotals.UDFFeeAmountTotal" class="control-label inlineLabel">UDF Total: </label>
                                        <input id="udfTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.UDFFeeAmountTotal" disabled />
                                    </div>
                                </div>
                                <div class="col-md-12 text-center">
                                    <div class="form-group col-md-2 col-md-offset-2">
                                        <label asp-for="Distribution.DistributionTotals.UDFFeeDevelopmentAmountTotal" class="control-label inlineLabel">UDF Dev. Total: </label>
                                        <input id="udfDevTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.UDFFeeDevelopmentAmountTotal" disabled />
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label asp-for="Distribution.DistributionTotals.UDFFeePresidentAmountTotal" class="control-label inlineLabel">UDF Pres. Total: </label>
                                        <input id="udfPresTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.UDFFeePresidentAmountTotal" disabled />
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label asp-for="Distribution.DistributionTotals.UDFFeeDeanAmountTotal" class="control-label inlineLabel">UDF Dean Total: </label>
                                        <input id="udfDeanTotal" class="form-control inlineControl amount" asp-for="Distribution.DistributionTotals.UDFFeeDeanAmountTotal" disabled />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- end designations panel -->

            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Supporting Documents:</h4>
                        </div>
                        <div class="panel-body">
                            <div id="SupportingDocumentsSection">
                                Loading Documents. Please wait ... .
                                @await Html.PartialAsync("_SupportingDocumentsList", Model.SupportingDocuments)
                            </div>
                            <div class="upload-container ml-3 mr-3">
                                <div class="">
                                    <input type="file" id="file_upload" accept=".png, .jpg, .jpeg, .tif, .tiff, .pdf, .xls, xlsx, .doc, .docx, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
                                    @for (int i = 0; i < Model.ValidFileTypes.Count(); i++)
                                    {
                                        <input type="hidden" id='@($"ValidFileTypes_{i}")' name='@($"ValidFileTypes[{i}]")' value="@Model.ValidFileTypes[i]" />
                                    }
                                </div>
                                <small class="text-silver"><strong>Supported file types:</strong> .pdf, .jpg, .png, .tif, .doc, .docx, .xls, .xlsx, .txt</small>
                                <br />
                                <small class="text-silver"><strong>File size limit:</strong> 9MB</small>
                                <br>
                                <div id="UploadStatusMessage" class="alert alert-danger d-none col-md-3"></div>
                                <button type="button" class="btn btn-blue btn-sm pull-right" onclick="uploadFiles()">Upload Supporting Document</button>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div> <!-- END supporting documents panel-->
            <!--Optional Section-->
            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Optional:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="form-group col-md-6">
                                <label asp-for="Optional.Appeal" class="control-label">Appeal</label>
                                <input asp-for="Optional.Appeal" class="form-control" maxlength="65" placeholder="Appeal" />
                                <span asp-validation-for="Optional.Appeal" class="text-danger"></span>
                            </div>
                            <div class="form-group col-md-6">
                                <label asp-for="Optional.Package" class="control-label">Package</label>
                                <input asp-for="Optional.Package" class="form-control" maxlength="50" placeholder="Package" />
                                <span asp-validation-for="Optional.Package" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- END optional panel-->

            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Processing Comments:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="form-group col-lg-12">
                                <label class="control-label" asp-for="ProcessingComments">Comments</label>
                                <textarea class="form-control" type="text" asp-for="ProcessingComments" rows="6" title="Comments" placeholder="Supply comments(s) here."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div> @*END Comments panel*@

            @if (Model.ApproverStage != 3)
            {
                <div class="panel-body">
                    <div class="col-sm-12 col-md-12 panel-container">
                        <div class="panel panel-secondary">
                            <div class="panel-heading">
                                <h4 class="panel-title">Reject Comments:</h4>
                            </div>
                            <div class="panel-body">
                                <div class="form-group col-lg-12">
                                    <label class="control-label" asp-for="ApprovalComments">Comments</label>
                                    <textarea class="form-control" type="text" asp-for="ApprovalComments" rows="6" title="Comments" placeholder="Supply reason(s) here."></textarea>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="form-group col-lg-12">
                                    <label class="control-label" asp-for="CCEmails">CC Emails</label>
                                    <textarea class="form-control" type="text" asp-for="CCEmails" rows="4" title="CCEmails" placeholder="Enter email(s) separated by comma"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> @*END Comments panel*@
            }

            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Status:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="form-group col-lg-12">
                                <div class="checkbox checkbox-primary flex-firstchild">
                                    <input type="checkbox" asp-for="ReceivedPhysicalDocuments" />
                                    <label for="ReceivedPhysicalDocuments">
                                        I confirm that physical documents for this gift transmittal have been received
                                    </label>
                                </div>
                            </div>
                            @if (Model.FormNumber.StartsWith("GT"))
                            {
                                @if (Model.ReceivedPhysicalDocuments)
                                {
                                    <div class="form-group col-lg-12">
                                        <div class="checkbox checkbox-primary flex-firstchild">
                                            <input type="checkbox" asp-for="WaitingOnResponseFromBursar" class="transmittal-status" onclick="CheckFormStatus(this)" />
                                            <label for="WaitingOnResponseFromBursar">
                                                Waiting on Response from Bursar
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-lg-12">
                                        <div class="checkbox checkbox-primary flex-firstchild">
                                            <input type="checkbox" asp-for="WaitingOnResponseFromPreparer" class="transmittal-status" onclick="CheckFormStatus(this)" />
                                            <label for="WaitingOnResponseFromPreparer">
                                                Waiting on Response from Preparer
                                            </label>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-group col-lg-12">
                                        <div class="checkbox checkbox-primary flex-firstchild">
                                            <input type="checkbox" asp-for="WaitingOnResponseFromBursar" class="transmittal-status" onclick="CheckFormStatus(this)" disabled />
                                            <label for="WaitingOnResponseFromBursar">
                                                Waiting on Response from Bursar
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-lg-12">
                                        <div class="checkbox checkbox-primary flex-firstchild">
                                            <input type="checkbox" asp-for="WaitingOnResponseFromPreparer" class="transmittal-status" onclick="CheckFormStatus(this)" disabled />
                                            <label for="WaitingOnResponseFromPreparer">
                                                Waiting on Response from Preparer
                                            </label>
                                        </div>
                                    </div>

                                }
                                <div class="form-group col-lg-12">
                                    <label class="control-label" asp-for="StatusComments">Comments</label>
                                    <textarea class="form-control" type="text" asp-for="StatusComments" rows="6" title="Comments" placeholder="Supply reason(s) here."></textarea>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div> @*END Status panel*@

            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <div class="d-flex">
                                <h4 class="panel-title">Approvers:</h4>
                                <button type="button" class="btn btn-xs historyPerField" title="History" data-toggle="modal" data-target="#ApprovalHistoryModal" tabindex="-1">
                                    <i role="img" class="fas fa-history fa-sm">&nbsp;</i><span>History</span>
                                </button>
                            </div>
                        </div>
                        <div class="panel-body">
                            @if (Model.ApproverStage == 1 && Model.FormNumber.StartsWith("GT"))
                            {
                                <div class="form-group col-lg-12">
                                    <div class="checkbox checkbox-primary flex-firstchild">
                                        <input type="hidden" asp-for="RequireSecondaryApprover" value="@Model.RequireSecondaryApprover" />

                                        <input id="RequireSecondaryApproverCheckbox"
                                               type="checkbox" @(Model.RequireSecondaryApprover ? "checked" : "")
                                               onchange="$('#RequireSecondaryApprover').val($(this).is(':checked'))" />
                                        <label for="RequireSecondaryApproverCheckbox">
                                            Require Secondary Approver
                                        </label>
                                    </div>
                                </div>
                            }
                            else
                            {
                                <input type="hidden" asp-for="RequireSecondaryApprover" value="@Model.RequireSecondaryApprover" />
                            }
                            <div class="col-lg-12">
                                @await Html.PartialAsync("_Approvers")
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!--END Approvers panel -->

            @if (Model.ApproverStage == 3){
                <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Post Date:</h4>
                        </div>
                        <div class="panel-body">
                            <div class="form-group col-md-3">
                                <label class="control-label" for="PostDate">Post Date</label>
                                <div class="input-group date">
                                    <input class="form-control" asp-for="PostDate" required"/>
                                    <span class="input-group-addon">
                                        <i class="fas fa-calendar-alt" title="calendar-icon"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> @*END Post Date panel*@
            }

            <div class="panel-footer clearfix">
                <div class="pull-right">
                    @*<button id="rejectButton" type="submit" class="btn btn-red" title="Reject Form Number @Model.FormNumber" disabled>
                    <i role="img" class="fas fa-ban">&nbsp;</i>Reject
                    </button>*@

                    @if (Model.ApproverStage == 1)
                    {
                        <button id="btnReject" type="submit" class="btn btn-red"
                                title="Save and reject by Reviewer" data-toggle="tooltip" value="ReviewerReject" asp-action="ReviewerReject" disabled>
                            <i role="img" class="fas fa-ban">&nbsp;</i>Reject
                        </button>
                    }
                    else if (Model.ApproverStage == 2)
                    {
                        <button id="btnReject" type="submit" class="btn btn-red"
                                title="Save and reject by Secondary Reviewer" data-toggle="tooltip" value="SecondaryReject" asp-action="SecondaryReject" disabled>
                            <i role="img" class="fas fa-ban">&nbsp;</i>Reject
                        </button>
                    }

                    @*@if (Model.ApproverStage == 3)
                    {
                    <button type="submit" class="btn btn-red"
                    title="Final Reject" data-toggle="tooltip" value="FinalReject" asp-action="FinalReject">
                    <i role="img" class="fas fa-ban">&nbsp;</i>Reject
                    </button>
                    }*@

                    @if (Model.ApproverStage == 1)
                    {
                        <button type="submit" class="btn btn-light btnApprove"
                                title="Save and approve by Reviewer" data-toggle="tooltip" value="ReviewerApprove" asp-action="ReviewerApprove" disabled>
                            <i role="img" class="fas fa-bookmark">&nbsp;</i>Approve
                        </button>
                    }
                    else if (Model.ApproverStage == 2)
                    {
                        <button type="submit" class="btn btn-light btnApprove"
                                title="Save and approve by Secondary Reviewer" data-toggle="tooltip" value="SecondaryApprove" asp-action="SecondaryApprove" disabled>
                            <i role="img" class="fas fa-bookmark">&nbsp;</i>Approve
                        </button>
                    }
                    else if (Model.ApproverStage == 3)
                    {
                        <button id="btnFinalize" type="submit" class="btn btn-light btnApprove"
                                title="Finalize: Save, approve, and send to PaperSave workflow" data-toggle="tooltip" value="FinalApprove" asp-action="Finalize" disabled>
                            <i role="img" class="fas fa-bookmark">&nbsp;</i>Finalize
                        </button>
                    }
                    @*<button id="approveButton" type="button" class="btn btn-primary ml-3" value="Approve" title="Approve Form Number @Model.FormNumber"
                    onclick="ApproveReject(true)">
                    <i role="img" class="fas fa-check">&nbsp;</i>Approve
                    </button>*@

                    @*<button type="submit"
                    class="btn btn-red" asp-action="Cancel">
                    <i role="img" class="fas fa-times">&nbsp;</i>Cancel
                    </button>*@
                </div>
                @if (Model.ApproverStage != 3)
                {
                    <a asp-area="" asp-controller="GiftTransmittal" asp-action="Index"
                       class="btn btn-link" title="Cancel Changes" data-toggle="tooltip">
                        <i role="img" class="fas fa-times">&nbsp;</i>Discard Changes
                    </a>
                }
                else
                {
                    <button type="submit" asp-controller="GiftTransmittal" asp-action="ResetUAFApprovers"
                            class="btn btn-link" title="Reset Approvers for Form @Model.FormNumber" data-toggle="tooltip">
                        <i role="img" class="fas fa-times">&nbsp;</i>Kickback
                    </button>
                }

                <button id="btnSave" type="submit" class="btn btn-light"
                        title="Save Gift Transmittal" data-toggle="tooltip" value="Save" asp-action="Edit">
                    <i role="img" class="fas fa-bookmark">&nbsp;</i>Save
                </button>
            </div><!-- /.panel-footer -->

        </div>
        <partial name="_PleaseWaitSupportingDocumentsModal" />
        <partial name="_PleaseWaitSupportingDocumentsDeleteModal" />

    </form>

</div>

<div class="modal fade" id="rejectTransmittalModal" tabindex="-1" role="dialog" aria-labelledby="rejectTransmittalModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="rejectTransmittalModalLabel">Reject Gift Transmittal</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="ua-brand-x" aria-hidden="true"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to reject Gift Transmittal @Model.FormNumber?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-blue" onclick="ApproveReject(false)">Yes</button>
                <button type="button" class="btn btn-red" data-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>

@section scripts{
    @await Html.PartialAsync("_Scripts")
    <script>
        var formNumber = "@Model.FormNumber";
        var batchTypeCode = '@Model.Transaction.BatchTypeCode';
        var rejectTransmittalURL = "@Url.Action("Reject")";
        var transmittalIndexURL = '@Url.Action("Index", "GiftTransmittal")';
        var addItemURL = '@Url.Action("AddItem", "GiftTransmittal")';
    </script>
}





