@model Sentry.WebApp.ViewModels.GiftTransmittal.GTInitializeViewModel

<ul class="page-title">
    <li>
        <h2>
            Form:
            <span title="Form Number: @Model.FormNumber"> @Model.FormNumber</span>
        </h2>
    </li>
    <li>
        <h2>
            Date:
            <span title="Date Created: @Model.CreatedOnDT"> @Model.CreatedOnDT</span>
        </h2>
    </li>
    <li>
        <h2>
            Source:
            <span title="Source System">Sentry</span>
        </h2>
    </li>
</ul>
<ol class="breadcrumb">
    <li><a asp-area="" asp-controller="Home" asp-action="Index">Sentry Home</a></li>
    <li><a asp-area="" asp-controller="Financial" asp-action="Index">Finance Dashboard</a></li>
    <li><a asp-area="" asp-controller="GiftTransmittal" asp-action="Index">Gift Transmittals Dashboard</a></li>
    <li class="active">Create</li>
</ol>
<div id="content-container" class="content-container" role="main">
    <form method="post" enctype="multipart/form-data">
        <div asp-validation-summary="All" class="text-danger"></div>
        <div class="panel panel-secondary">
            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Preparer</h4>
                        </div>
                        <div class="panel-body">
                            <input type="hidden" asp-for="PreparedByEmployeeId" value="@Model.PreparedByEmployeeId" />
                            <div class="form-group ml-2">
                                <label class="control-label">Preparer Search<span style="color: #FF0000;"> *</span></label>
                                <select asp-for="PreparedByEmployeeId" class="form-control"></select>
                            </div>

                            <div class="col-12 row">
                                <input type="hidden" asp-for="GiftTransmittalId" value="@Model.GiftTransmittalId" />
                                <input type="hidden" asp-for="GiftTransmittalItemId" value="@Model.GiftTransmittalItemId" />
                                <input type="hidden" asp-for="GiftTransmittalDistributionId" value="@Model.GiftTransmittalDistributionId" />
                                <input type="hidden" asp-for="DepartmentCode" value="@Model.DepartmentCode" />
                                <input type="hidden" asp-for="DepartmentName" value="@Model.DepartmentName" />
                                <input type="hidden" asp-for="JobTitle" value="@Model.JobTitle" />
                                <input type="hidden" asp-for="PreparerName" value="@Model.PreparerName" />
                                <input type="hidden" asp-for="Email" value="@Model.Email" />
                                <input type="hidden" asp-for="Phone" value="@Model.Phone" />
                                <input type="hidden" asp-for="Organization" value="@Model.Organization" />
                                <input type="hidden" asp-for="FormNumber" value="@Model.FormNumber" />
                                <input type="hidden" asp-for="IsChanged" value="@Model.IsChanged" />
                                <input type="hidden" asp-for="Id" value="@Model.Id" />
                                <input type="hidden" asp-for="PageId" value="@Model.PageId" />
                                <input type="hidden" asp-for="System" value="@Model.System" />
                                <input type="hidden" asp-for="SystemId" value="@Model.SystemId" />
                                <input type="hidden" asp-for="Integration" value="@Model.Integration" />
                                <input type="hidden" asp-for="IntegrationId" value="@Model.IntegrationId" />
                                <input type="hidden" asp-for="RecordStatus" value="@Model.RecordStatus" />
                                <input type="hidden" asp-for="SourceRecordId" value="@Model.SourceRecordId" />
                                <input type="hidden" asp-for="ChangeAgent" value="@Model.ChangeAgent" />
                                <input type="hidden" asp-for="CreatedOnDT" value="@Model.CreatedOnDT" />

                                <dl class="dl-horizontal ml-4" style="margin-bottom: 0;">
                                    <dt><b>Preparer Name:</b></dt>
                                    <dd id="PreparedByNameText" style="font-weight: 400;">@Model.PreparerName</dd>
                                    <dt><b>Department:</b></dt>
                                    <dd id="DepartmentText" style="font-weight: 400;">@Model.DepartmentCode @Model.DepartmentName</dd>
                                    <dt><b>Job Title:</b></dt>
                                    <dd id="JobTitleText" style="font-weight: 400;">@Model.JobTitle</dd>
                                    <dt><b>Email:</b></dt>
                                    <dd id="EmailText" style="font-weight: 400;">@Model.Email</dd>
                                    <dt><b>Phone Number:</b></dt>
                                    <dd id="PhoneNumberText" style="font-weight: 400;">@Model.Phone</dd>
                                </dl>
                            </div>
                            <br />
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Constituent</h4>
                        </div>
                        <div class="panel-body">
                            <div>
                                <input type="radio" id="individual" value="Individual" asp-for="InitializedConstituent.ConstituentFor" />
                                <label class="control-label" for="individual">Individual</label>
                                <input type="radio" id="organization" value="Organization" asp-for="InitializedConstituent.ConstituentFor" />
                                <label class="control-label" onclick="checkOrgRadio()" for="organization">Organization</label>
                            </div>
                            <div class="row" id="organizationNameSection">
                                <div class="col-sm-12 col-lg-5">
                                    <div class="form-group mt-3">
                                        <label asp-for=" InitializedConstituent.OrganizationName" class="control-label">Organization Name</label>
                                        <input asp-for="InitializedConstituent.OrganizationName" class="form-control" placeholder="Name of Organization" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" id="constituentNameSection">
                                <divc class="col-lg-4">
                                    <label asp-for="InitializedConstituent.FirstName" class="control-label">First Name</label>
                                    <input asp-for="InitializedConstituent.FirstName" class="form-control" placeholder="First Name" />
                                </divc>
                                <div class="col-lg-4">
                                    <label asp-for="InitializedConstituent.LastName" class="control-label">Last Name</label>
                                    <input asp-for="InitializedConstituent.LastName" class="form-control" placeholder="Last Name" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Designation</h4>
                        </div>
                        <div class="panel-body">
                            @*<div class="col-xs-12 col-sm-12 col-lg-2">*@
                                <table id="distTable" class="table">
                                    <tbody>
                                        <tr id="mainDataRow">
                                            <td id="designationDiv">
                                                <label class="control-label ml-3">Designation</label>
                                                <div class="input-group mb-3">
                                                    <div class="col-md-3">
                                                        <input class="form-control"
                                                               asp-for="ProjectDistribution.ProjectId" />
                                                        <span asp-validation-for="ProjectDistribution.ProjectId" class="text-danger"></span>
                                                    </div>
                                                    @*<div class="input-group-append">
                                                        <button class="btn btn-sm btn-blue" type="button" id="expandButton" value="Find Designation"
                                                                onclick="showDesignationSearch()">
                                                            Find Designation
                                                        </button>
                                                    </div>*@
                                                </div>
                                                <div id="selectUAProject" class="dropPanel" style="display: none">
                                                    <div id="college" class="dropPanelDiv">
                                                        <div class="row">
                                                            <div class="col-md-12 form-group mt-2">
                                                                <label class="control-label">Division</label>
                                                                <select id="College_code" class="form-control dropPanelControl"
                                                                        onchange="getInitializedDepartments(this.value)"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="dept" class="dropPanelDiv">
                                                        <div class="row">
                                                            <div class="col-md-12 form-group">
                                                                <label class="control-label">Department</label>
                                                                <select id="Dept_code" class="form-control dropPanelControl"
                                                                        onchange="getInitializedProjects(this.value)"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div id="UAproject" class="dropPanelDiv">
                                                        <div class="row">
                                                            <div class="col-md-12 form-group">
                                                                <label class="control-label">Designation</label>
                                                                <select id="UAFundID" class="form-control dropPanelControl"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <button type="button" class="btn btn-light dropPanelButton"
                                                                onclick="hideDesignationSearch()">
                                                            Cancel
                                                        </button>
                                                        <button type="button" class="btn btn-blue dropPanelButton"
                                                                onclick="acceptDesignationSearch()">
                                                            Select
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="control-label">Amount <span class="required">*</span></label>
                                                    <input asp-for="ProjectDistribution.Amount" class="form-control amount"
                                                           placeholder="0.00"/>
                                                    <span asp-validation-for="ProjectDistribution.Amount" class="text-danger"></span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-body">
                <div class="col-sm-12 col-md-12 panel-container">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h4 class="panel-title">Supporting Documents:</h4>
                        </div>
                        <div class="panel-body">
                            <div id="SupportingDocumentsSection">
                                @await Html.PartialAsync("_SupportingDocumentsList", Model.SupportingDocuments)
                            </div>
                            <div class="upload-container ml-3 mr-3">
                                <div class="">
                                    <input type="file" id="file_upload" accept=".png, .jpg, .jpeg, .tif, .tiff, .pdf, .xls, xlsx, .txt, .doc, .docx, .xml, application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
                                    @for (int i = 0; i < Model.ValidFileTypes.Count(); i++)
                                    {
                                        <input type="hidden" id='@($"ValidFileTypes_{i}")' name='@($"ValidFileTypes[{i}]")' value="@Model.ValidFileTypes[i]" />
                                    }
                                </div>
                                <small class="text-silver"><strong>Supported file types:</strong> .pdf, .jpg, .png, .tif, .doc, .docx, .xls, .xlsx, .txt</small>
                                <br />
                                <small class="text-silver"><strong>File size limit:</strong> 9MB</small>
                                <br>
                                <div id="UploadStatusMessage" class="alert alert-danger d-none col-md-3"></div>
                                <button type="button" class="btn btn-blue btn-sm pull-right" onclick="uploadFiles()">Upload Supporting Document</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-footer clearfix">
                <button type="submit" 
                        class="btn btn-primary pull-right ml-3" 
                        value="Next" 
                        asp-action="Create"
                        >
                    <i role="img" class="fas fa-check">&nbsp;</i>Next
                </button>
            </div>
        </div>
    </form>
</div>
@await Html.PartialAsync("_PleaseWaitSupportingDocumentsModal")

@section scripts{

    <script>
        var PreparerIdMethod = '@Url.Action("GetEmployeeByName", "GiftTransmittal")';
        var preparedByEmployeeId = '@Model.PreparedByEmployeeId';
        var formNumber = '@Model.FormNumber';
        var Organization = '@Model.Organization';
    </script>
    @await Html.PartialAsync("_Scripts")
}